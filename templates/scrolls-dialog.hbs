<div class="bmc-scrolls-container">
    <div class="bmc-scrolls-header">
        <h3>Доступные свитки для изучения</h3>
        <p class="bmc-scrolls-description">Выберите свиток с рецептом для изучения:</p>
    </div>
    
    <div class="bmc-scrolls-list">
        {{#if scrolls.length}}
            {{#each scrolls}}
            <div class="scroll-item rarity-{{rarity}}" data-scroll-id="{{id}}">
                <div class="scroll-icon">
                    <img src="{{img}}" alt="{{name}}" />
                </div>
                <div class="scroll-info">
                    <h4 class="scroll-name rarity-{{rarity}}">{{name}}</h4>
                    <div class="scroll-rarity rarity-{{rarity}}">
                        {{#if (eq rarity "common")}}Обычный{{/if}}
                        {{#if (eq rarity "uncommon")}}Необычный{{/if}}
                        {{#if (eq rarity "rare")}}Редкий{{/if}}
                        {{#if (eq rarity "veryRare")}}Очень редкий{{/if}}
                        {{#if (eq rarity "legendary")}}Легендарный{{/if}}
                        {{#if (eq rarity "artifact")}}Артефакт{{/if}}
                    </div>
                    <div class="scroll-recipe">
                        <strong>Рецепт:</strong> {{recipe.name}}
                    </div>
                    <div class="scroll-description">
                        {{#if description}}
                            <p>{{{description}}}</p>
                        {{else}}
                            <p><em>Нет описания</em></p>
                        {{/if}}
                    </div>
                </div>
                <div class="scroll-action">
                    <button class="bmc-learn-btn" type="button">
                        <i class="fas fa-book-open"></i>
                        Изучить
                    </button>
                </div>
            </div>
            {{/each}}
        {{else}}
            <div class="no-scrolls">
                <i class="fas fa-scroll"></i>
                <p>У вас нет свитков с рецептами для изучения</p>
                <p>Попросите ГМа предоставить свитки с рецептами</p>
            </div>
        {{/if}}
    </div>
</div>

<style>
    .bmc-scrolls-container {
        padding: 20px;
        background: 
            radial-gradient(1200px 600px at 30% 20%, rgba(220, 177, 116, 0.08), transparent 60%),
            radial-gradient(900px 500px at 70% 80%, rgba(92, 78, 56, 0.35), transparent 65%),
            linear-gradient(145deg, #121212 0%, #1d1c1b 45%, #121212 100%);
        color: #dcb174;
        font-family: "Modesto Condensed", "Palatino Linotype", serif;
        height: 100%;
        overflow-y: auto;
    }

    .bmc-scrolls-header {
        text-align: center;
        margin-bottom: 20px;
        border-bottom: 2px solid rgba(240, 216, 167, 0.3);
        padding-bottom: 15px;
    }

    .bmc-scrolls-header h3 {
        color: #f0d8a7;
        font-size: 20px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 2px;
        margin: 0 0 10px 0;
        text-shadow: 0 0 10px rgba(240, 216, 167, 0.3);
    }

    .bmc-scrolls-description {
        color: #dcb174;
        font-size: 14px;
        margin: 0;
        opacity: 0.8;
    }

    .bmc-scrolls-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .scroll-item {
        display: flex;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(220, 177, 116, 0.3);
        border-radius: 8px;
        padding: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    /* Стили редкости для свитков */
    .scroll-item.rarity-common {
        border-color: #a0a0a0;
        box-shadow: 0 0 5px rgba(160, 160, 160, 0.3);
    }

    .scroll-item.rarity-uncommon {
        border-color: #45e64a;
        box-shadow: 0 0 5px rgba(69, 230, 74, 0.3);
    }

    .scroll-item.rarity-rare {
        border-color: #00b0f0;
        box-shadow: 0 0 5px rgba(0, 176, 240, 0.3);
    }

    .scroll-item.rarity-veryRare, 
    .scroll-item.rarity-veryrare {
        border-color: #d02090;
        box-shadow: 0 0 5px rgba(208, 32, 144, 0.3);
    }

    .scroll-item.rarity-legendary {
        border-color: #ffbf00;
        box-shadow: 0 0 8px rgba(255, 191, 0, 0.4);
    }

    .scroll-item.rarity-artifact {
        border-color: #ff4500;
        box-shadow: 0 0 10px rgba(255, 69, 0, 0.4);
    }

    .scroll-item:hover {
        background: rgba(220, 177, 116, 0.1);
        border-color: rgba(240, 216, 167, 0.5);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .scroll-icon {
        flex-shrink: 0;
        width: 60px;
        height: 60px;
        margin-right: 15px;
        border: 2px solid rgba(220, 177, 116, 0.4);
        border-radius: 8px;
        overflow: hidden;
        background: rgba(0, 0, 0, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .scroll-icon img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .scroll-info {
        flex: 1;
        margin-right: 15px;
    }

    .scroll-name {
        color: #f0d8a7;
        font-size: 16px;
        font-weight: bold;
        margin: 0 0 8px 0;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    /* Цвет текста имени свитка в зависимости от редкости */
    .scroll-name.rarity-common { color: #a0a0a0; }
    .scroll-name.rarity-uncommon { color: #45e64a; text-shadow: 0 0 5px rgba(69, 230, 74, 0.4); }
    .scroll-name.rarity-rare { color: #00b0f0; text-shadow: 0 0 5px rgba(0, 176, 240, 0.4); }
    .scroll-name.rarity-veryRare, 
    .scroll-name.rarity-veryrare { color: #d02090; text-shadow: 0 0 5px rgba(208, 32, 144, 0.4); }
    .scroll-name.rarity-legendary { color: #ffbf00; text-shadow: 0 0 8px rgba(255, 191, 0, 0.6); }
    .scroll-name.rarity-artifact { color: #ff4500; text-shadow: 0 0 10px rgba(255, 69, 0, 0.6); }

    .scroll-rarity {
        font-size: 12px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 8px;
        padding: 2px 6px;
        border-radius: 4px;
        display: inline-block;
    }

    /* Фон и текст для индикатора редкости */
    .scroll-rarity.rarity-common { 
        background: rgba(160, 160, 160, 0.2); 
        color: #a0a0a0; 
        border: 1px solid #a0a0a0;
    }
    .scroll-rarity.rarity-uncommon { 
        background: rgba(69, 230, 74, 0.2); 
        color: #45e64a; 
        border: 1px solid #45e64a;
        text-shadow: 0 0 3px rgba(69, 230, 74, 0.4);
    }
    .scroll-rarity.rarity-rare { 
        background: rgba(0, 176, 240, 0.2); 
        color: #00b0f0; 
        border: 1px solid #00b0f0;
        text-shadow: 0 0 3px rgba(0, 176, 240, 0.4);
    }
    .scroll-rarity.rarity-veryRare, 
    .scroll-rarity.rarity-veryrare { 
        background: rgba(208, 32, 144, 0.2); 
        color: #d02090; 
        border: 1px solid #d02090;
        text-shadow: 0 0 3px rgba(208, 32, 144, 0.4);
    }
    .scroll-rarity.rarity-legendary { 
        background: rgba(255, 191, 0, 0.2); 
        color: #ffbf00; 
        border: 1px solid #ffbf00;
        text-shadow: 0 0 5px rgba(255, 191, 0, 0.6);
    }
    .scroll-rarity.rarity-artifact { 
        background: rgba(255, 69, 0, 0.2); 
        color: #ff4500; 
        border: 1px solid #ff4500;
        text-shadow: 0 0 5px rgba(255, 69, 0, 0.6);
    }

    .scroll-recipe {
        color: #dcb174;
        font-size: 14px;
        margin: 5px 0;
    }

    .scroll-recipe strong {
        color: #f0d8a7;
    }

    .scroll-description {
        color: #dcb174;
        font-size: 13px;
        margin: 8px 0 0 0;
        opacity: 0.8;
        line-height: 1.4;
    }

    .scroll-description p {
        margin: 0;
    }

    .scroll-action {
        flex-shrink: 0;
        display: flex;
        align-items: center;
    }

    .bmc-learn-btn {
        background: linear-gradient(180deg, rgba(240, 216, 167, 0.22), rgba(220, 177, 116, 0.06));
        border: 1px solid rgba(240, 216, 167, 0.85);
        color: #f0d8a7;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        transition: all 0.2s;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .bmc-learn-btn:hover {
        background: linear-gradient(180deg, rgba(255, 241, 198, 0.28), rgba(220, 177, 116, 0.08));
        border-color: rgba(255, 241, 198, 0.95);
        color: #fff1c6;
        box-shadow: 
            0 0 0 1px rgba(220, 177, 116, 0.12),
            0 14px 30px rgba(0, 0, 0, 0.55),
            0 0 22px rgba(220, 177, 116, 0.25);
    }

    .no-scrolls {
        text-align: center;
        padding: 40px 20px;
        color: #dcb174;
        opacity: 0.7;
    }

    .no-scrolls i {
        font-size: 48px;
        margin-bottom: 15px;
        opacity: 0.5;
    }

    .no-scrolls p {
        margin: 8px 0;
        font-size: 16px;
    }
</style>
